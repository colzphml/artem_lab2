#!/usr/bin/env bash
# ------------------------------------------------------------
# build.sh — сборка проекта “center_of_mass”
# ------------------------------------------------------------
# Запускается ИЗНУТРИ контейнера с установленным g++.
# Папка /workspace смонтирована на хостовый каталог через docker‑compose.
# ------------------------------------------------------------

set -euo pipefail      # •e — выход при ошибке
                       # •u — ошибка при обращении к не‑объявленной переменной
                       # •o pipefail — корректная обработка ошибок в конвейерах

# --------- параметры сборки ---------------------------------
CXX=g++
STD=-std=c++17
WARNINGS="-Wall -Wextra -pedantic"
OPT="-O2"
SRC=("main.cpp" "center_of_mass.cpp")
OUT="center_of_mass"
# ------------------------------------------------------------

echo "==> Начинаю компиляцию: ${SRC[*]} -> ${OUT}"
$CXX $STD $WARNINGS $OPT "${SRC[@]}" -o "$OUT"

echo "==> Сборка успешна."
echo "==> Для запуска выполните: ./$OUT (не забудьте подготовить input.txt)"